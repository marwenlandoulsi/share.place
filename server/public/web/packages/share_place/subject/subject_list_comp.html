<div *ngIf="selectedFolder != null" class="subjects">

  <material-popup [(visible)]="infoPopupOpen" [source]="userInfoPopup">
    <div class="userInfoPopup">
      <div class="userInfo name"><span>{{infoPopupUser?.name}}</span></div>
      <div class="userInfo role">{{getRoleStr(infoPopupUser)}}</div>
      <div class="userInfo email">{{getEmail(infoPopupUser)}}</div>
      <div class="userInfo skype"> <span class="txtskype">Text:</span>  andjones</div>
      <div class="userInfo skype"> <span class="txtskype">Call:</span> andjones </div>
      <div class="userInfo timezone"> Timezone UTC-7  9:24 am </div>

      <div class="userInfo lastcnx">Last connection: 5 mn ago</div>
    </div>
  </material-popup>

  <div class="title">{{selectedFolder.name}}

    <postit-comp [name]="'subjects'" [header]="'Great!'"
                 [body]="'Now invite some poople to join you clicking on the + icon'"
                 class="subjectsPostit"></postit-comp>

    <btn (click)="add()"
         [sources]="['../images/add-poeple.png', '../images/add-poeple.png', '../images/add-poeple.png']"
         class="addBtn addpeople" [disabled]="selectedFolder==null"></btn>

    <modal [visible]="adding">
      <material-dialog defaultPopupSizeProvider
                       enforceSpaceConstraints
                       class="profilemenuvisible">
        <invite-users-dialog></invite-users-dialog>
      </material-dialog>
    </modal>
    <!-- emplacement des users  -->
    <ul class="users_list" popupSource
        #userInfoPopup="popupSource">
      <li *ngFor="let userItem of users" class="useractive" [class.approver]="isApprover(userItem)"
          (click)="userInfoRequested =userItem">
        <img src="/auth/user/photo/s/{{userItem.id}}">
      </li>


    </ul>
  </div>

  <div>
    <ul class="subjectList">
      <div class="newTopic">
        <div class="newTopicBlock">
          <input type="text" #text (keyup.enter)="createQuickNote(text.value);text.value='';"
                 placeholder="Start a topic..."
                 class="txt"/>
          <div (click)="createQuickNote(text.value);text.value=''" class="btn_valid"></div>
        </div>
      </div>
      <li *ngFor="let subject of subjects" (click)="gotoSubject(subject)" class="subjectItem"
          [class.qNote]="subject.dataType == 'quickNote'"
          [class.selected]="selectedSubject != null && subject.id == selectedSubject.id"
          [class.approved]="subject.approved != null"
          [class.locked]="subject.lockOwner != null">
        <div *ngIf="renaming == null || renaming?.id != subject?.id" class="subject">
          <div class="thumb"><img
              src="/sp/place/{{selectedPlace.id}}/folder/{{selectedFolder?.id}}/file/{{subject.fileId}}/version/{{subject.v}}/thumb">
          </div>
          <div class="name">{{subject.name}}</div>

          <div class="users">
            <ul>
              <li *ngFor="let activeUser of subject.users" class="user">
                <div class="profileImg" [class.validator]="activeUser.role == 'admin'"><img
                    src="/auth/user/photo/s/{{activeUser.userId}}"></div>
              </li>
            </ul>
          </div>
          <div *ngIf="subject.dataType == 'file'" class="version"> V.{{subject.v}}</div>
        </div>
        <input *ngIf="renaming != null && renaming.id == subject?.id" type="text" #folderRenamer
               value="{{subject.name}}"
               (keydown.enter)="doRename(folderRenamer.value)" class="editSubject"/>
      </li>
    </ul>

    <form id="fileForm" #upload class="uploadDropZone"
          (dragenter)="upload.style.setProperty('border', '2px solid #9FC8FA')"
          (drop)="upload.style.setProperty('border', '2px dotted #273B54');">
      <label id="labelfileupload" for="fileupload"> Drag'n drop or browse file </label>
      <input type="file" id="fileupload" (change)="uploadFiles()" class="uploadFile" name="toUpload"
             style="opacity: 0"/>

      <postit-comp [name]="'files'" [header]="'Cool !'"
                   [body]="'Now you can Drag\'n drop a file here and start collaborate with your team '"
                   class="filesPostit"></postit-comp>
    </form>
  </div>
</div>