<div *ngIf="selectedFolder != null" class="subjects">

  <div class="title">{{selectedFolder.name}}

    <postit-comp [name]="'invitePeople'" [header]="'Great!'"
                 [body]="'Now invite some poople to join you clicking on the + icon'"
                 class="subjectsPostit"></postit-comp>

    <btn (click)="add()"
         [sources]="['../images/add-poeple.png', '../images/add-poeple.png', '../images/add-poeple.png']"
         class="addBtn addpeople" [disabled]="selectedFolder==null"></btn>

    <modal [visible]="adding">
      <material-dialog defaultPopupSizeProvider
                       enforceSpaceConstraints
                       class="profilemenuvisible">
        <invite-users-dialog></invite-users-dialog>
      </material-dialog>
    </modal>
    <!-- emplacement des users  -->
    <ul class="users_list">
      <li *ngFor="let userItem of users" popupSource #userInfoPopup="popupSource" alignPositionX="end"
          alignPositionY="after" class="useractive" [class.approver]="isOwner(userItem)"
          (click)="userInfoRequested=userItem">
        <img src="/auth/user/photo/s/{{userItem.id}}">

        <info-popup *ngIf="infoPopupUser?.id == userItem.id" [(visible)]="infoPopupOpen" [source]="userInfoPopup" [offsetX]="7" [offsetY]="0"
                    [userId]="userItem.id" [parent]="self" [arrowCss]="'arrowTop'"></info-popup>
      </li>
    </ul>
  </div>
  <div class="newTopic">
    <div class="newTopicBlock">
      <input type="text" #text (keyup.enter)="createQuickNote(text.value);text.value='';"
             placeholder="Start a topic..."
             class="txt"/>
      <div (click)="createQuickNote(text.value);text.value=''" class="btn_valid"></div>
    </div>
  </div>
  <div>
    <ul class="subjectList">
      <div class="subjectListInner">
      <li *ngFor="let subject of subjects; let subjectIndex = index" (click)="gotoSubject(subject)" class="subjectItem"
          [class.qNote]="subject.dataType == 'quickNote'"
          [class.selected]="selectedSubject != null && subject.id == selectedSubject.id"
          [class.approved]="subject.approved != null"
          [class.locked]="subject.lockOwner != null"
          [class.ownAction]="subject.lockOwner?.userId == connectedUser.id"
          [class.unread]="wasRead(subject)">
        <div *ngIf="renaming == null || renaming?.id != subject?.id" class="subject">
          <div class="thumb"><img
              src="/sp/place/{{selectedPlace.id}}/folder/{{selectedFolder?.id}}/file/{{subject.fileId}}/version/{{subject.v}}/thumb">
          </div>
          <div *ngIf="subject.dataType == 'file'" class="version"> V.{{subject.v}}</div>
          <div class="name">{{subject.name}}</div>
          <div class="users">
            <ul>
              <li *ngFor="let activeUser of subject.users" class="user">
                <div class="profileImg" [class.validator]="activeUser.role == 'admin'"
                     (click)="showSubjectUserInfoPopup( activeUser.userId, subjectIndex, $event )"
                     popupSource alignPositionX="end"
                     alignPositionY="after" #subjectParticipant="popupSource">
                  <img src="/auth/user/photo/s/{{activeUser.userId}}">
                </div>
                <input *ngIf="renaming != null && renaming.id == subject?.id" type="text" #folderRenamer
                       value="{{subject.name}}"
                       (keydown.enter)="doRename(folderRenamer.value)" class="editSubject"/>
                <info-popup *ngIf="subjectIndex == subjectInfoPopupIndex && popupUserInfoId == activeUser.userId"
                            [userId]="popupUserInfoId"
                            [source]="subjectParticipant" [offsetX]="11" [offsetY]="10"
                            [visible]="popupUserInfoId == activeUser.userId" [parent]="self" [arrowCss]="'arrowTop'"></info-popup>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
        </div>
        <div class="clearfix"></div>
      </li>
      </div>
    </ul>

    <form id="fileForm" #upload class="uploadDropZone"
          (dragenter)="upload.style.setProperty('border', '2px solid #9FC8FA')"
          (drop)="upload.style.setProperty('border', '2px dotted #273B54');">
      <label id="labelfileupload" for="fileupload"> Drag'n drop or browse file </label>
      <input type="file" id="fileupload" (change)="uploadFiles()" class="uploadFile" name="toUpload"
             style="opacity: 0"/>

      <postit-comp [name]="'files'" [header]="'Cool !'"
                   [body]="'Now you can Drag\'n drop a file here and start collaborate with your team '"
                   class="filesPostit"></postit-comp>
    </form>
  </div>
</div>