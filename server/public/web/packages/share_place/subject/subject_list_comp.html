<div *ngIf="selectedFolder != null" class="subjects">

  <material-popup  [(visible)]="infoPopupOpen" [source]="userInfoPopup">
    <div class="userInfoPopup">
      <div>{{infoPopupUser?.name}}</div>
      <div>{{getRoleStr(infoPopupUser)}}</div>
      <div>{{getEmail(infoPopupUser)}}</div>
    </div>
  </material-popup>

  <div class="title">{{selectedFolder.name}}
    <btn (click)="add()"
         [sources]="['../images/add-poeple.png', '../images/add-poeple.png', '../images/add-poeple.png']"
         class="addBtn addpeople" [disabled]="selectedFolder==null"></btn>
    <modal [visible]="adding">
      <material-dialog defaultPopupSizeProvider
                       enforceSpaceConstraints
                       class="profilemenuvisible">
        <invite-users-dialog></invite-users-dialog>
      </material-dialog>
    </modal>
                     <!-- emplacement des users  -->
    <ul class="users_list" popupSource
        #userInfoPopup="popupSource">
      <li *ngFor="let userItem of users" class="useractive" [class.approver]="isApprover(userItem)"
          (click)="userInfoRequested =userItem">
        <img src="/auth/user/photo/s/{{userItem.id}}">
      </li>
    </ul>
  </div>

  <div>
    <ul class="subjectList">
      <div class="newTopic">
        <div class="newTopicBlock">
          <input type="text" #text (keyup.enter)="createQuickNote(text.value);text.value='';"
                 placeholder="Start a topic..."
                 class="txt"/>
          <div (click)="createQuickNote(text.value);text.value=''" class="btn_valid"></div>
        </div>
      </div>
      <li *ngFor="let subject of subjects" (click)="gotoSubject(subject)" class="subjectItem"
          [class.qNote]="subject.dataType == 'quickNote'"
          [class.selected]="selectedSubject != null && subject.id == selectedSubject.id"
          [class.approved]="subject.approved != null"
          [class.locked]="subject.lockOwner != null">
        <div *ngIf="renaming == null || renaming?.id != subject?.id" class="subject">
          <div class="thumb"><img
              src="/sp/place/{{selectedPlace.id}}/folder/{{selectedFolder?.id}}/file/{{subject.fileId}}/version/{{subject.v}}/thumb">
          </div>
          <div class="name">{{subject.name}}</div>

          <div class="users">
            <ul>
              <li *ngFor="let activeUser of subject.users" class="user">
                <div class="profileImg" [class.validator]="activeUser.role == 'admin'"><img
                    src="/auth/user/photo/s/{{activeUser.userId}}"></div>
              </li>
            </ul>
          </div>
          <div *ngIf="subject.dataType == 'file'" class="version"> V.{{subject.v}}</div>
        </div>
        <input *ngIf="renaming != null && renaming.id == subject?.id" type="text" #folderRenamer
               value="{{subject.name}}"
               (keydown.enter)="doRename(folderRenamer.value)" class="editSubject"/>
      </li>
    </ul>

    <form id="fileForm" #upload class="uploadDropZone"
          (dragenter)="upload.style.setProperty('border', '3px solid green')"
          (drop)="upload.style.setProperty('border', '2px dotted gray');">
      <input type="file" (change)="uploadFiles()" class="uploadFile"
             name="toUpload"/>

    </form>


  </div>
</div>